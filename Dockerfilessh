FROM python:3.7-alpine
RUN \
	apt update && \
	apt -y upgrade && \
    apt -y install python3-pip && \
    apt -y install git && \
    apt -y install vim && \
    git clone https://github.com/williamgdo/IMA_management.git && \
    pip3 install requests && \
    pip3 install pika==0.13.1 && \
    pip3 install influxdb && \
    pip3 install flask && \
    pip3 install flask_request_params && \
    pip3 install pyyaml && \
    pip3 install paramiko && \
    apt install net-tools && \
    pip3 install docker && \
    apt -y install iputils-ping && \
    cd IMA_management/ && \
    git pull

ENTRYPOINT python3.7 IMA_management/release/adapter_ssh.py >> adapter.log
