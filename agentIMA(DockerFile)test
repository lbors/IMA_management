FROM ubuntu:latest
RUN \
	apt update && \
	apt -y upgrade && \
    apt -y install python3-pip && \
    apt -y install iperf3 && \
    apt -y install iperf && \
    apt -y install stress && \
    apt -y install stress-ng && \
    apt -y install git && \
    apt -y install vim && \
    git clone https://github.com/andrebeltrami/IMAv2.git && \
    pip3 install requests && \
    pip3 install pika==0.13.1 && \
    pip3 install influxdb && \
    pip3 install flask && \
    pip3 install flask_request_params && \
    pip3 install pyyaml && \
    apt install net-tools && \
    pip3 install docker && \
    apt -y install iputils-ping && \
    cd IMAv2/ && \
    git checkout productionv2 && \
		git pull

ENTRYPOINT python3.6 IMAv2/agentIMA/agent_REST.py >> agent_REST.log
